<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Write-Offs</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; background: #f5f7fa; padding: 20px; }

  /* ===== TABLE ===== */
  table { border-collapse: collapse; width: 100%; margin-top: 20px; background: #fff; }
  th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: center; }
  th { background: #00796b; color: #fff; }
  input[type="number"] { width: 80px; padding: 4px; text-align: right; }

  /* ===== SUBMIT BUTTON ===== */
  .submit-btn {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    background: #00796b;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  .submit-btn:hover { background: #004d40; }
</style>
</head>
<body>

<h2>Client Write-Offs</h2>

<table id="writeoffTable">
  <tr>
    <th>Client</th>
    <th>Net WIP ($)</th>
    <th>Fee Amount ($)</th>
    <th>Write-Off ($)</th>
  </tr>
  <!-- Dummy client rows -->
  <tr><td>ACME Corp</td><td class="netwip">12500</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">12500</td></tr>
  <tr><td>Beta LLC</td><td class="netwip">8200</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">8200</td></tr>
  <tr><td>Gamma Inc</td><td class="netwip">15300</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">15300</td></tr>
  <tr><td>Delta Co</td><td class="netwip">6700</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">6700</td></tr>
  <tr><td>Epsilon Ltd</td><td class="netwip">9800</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">9800</td></tr>
  <tr><td>Zeta Partners</td><td class="netwip">14100</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">14100</td></tr>
  <tr><td>Eta Group</td><td class="netwip">7500</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">7500</td></tr>
  <tr><td>Theta Enterprises</td><td class="netwip">11200</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">11200</td></tr>
  <tr><td>Iota Solutions</td><td class="netwip">5900</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">5900</td></tr>
  <tr><td>Kappa Consulting</td><td class="netwip">10400</td><td><input type="number" min="0" value="0" class="fee"></td><td class="writeoff">10400</td></tr>
</table>

<button class="submit-btn" onclick="submitWriteOffs()">Submit Write-Offs</button>

<script>
// Auto-calculate Write-Off when Fee changes
const rows = document.querySelectorAll('#writeoffTable tr');
rows.forEach((row, index) => {
  if (index === 0) return; // skip header
  const feeInput = row.querySelector('.fee');
  feeInput.addEventListener('input', () => {
    const netWip = parseFloat(row.querySelector('.netwip').textContent) || 0;
    let fee = parseFloat(feeInput.value) || 0;
    let writeoff = netWip - fee;
    if (writeoff < 0) writeoff = 0;
    row.querySelector('.writeoff').textContent = writeoff.toFixed(2);
  });
});

function submitWriteOffs() {
  const table = document.getElementById('writeoffTable');
  const rows = table.querySelectorAll('tr');
  const results = [];
  
  for (let i = 1; i < rows.length; i++) {
    const client = rows[i].cells[0].textContent;
    const netwip = rows[i].cells[1].textContent;
    const fee = rows[i].cells[2].querySelector('input').value;
    const writeoff = rows[i].cells[3].textContent;
    if (fee && fee != '0') {
      results.push({ client, netwip, fee, writeoff });
    }
  }
  
  if (results.length === 0) {
    alert("No fees entered.");
  } else {
    console.log("Write-Offs Submitted:", results);
    alert("Write-offs submitted! Check console for details.");
  }
}
</script>

</body>
</html>
